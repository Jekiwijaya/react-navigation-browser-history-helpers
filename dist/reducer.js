Object.defineProperty(exports,"__esModule",{value:true});var _isEmpty=require('lodash/isEmpty');var _isEmpty2=_interopRequireDefault(_isEmpty);var _reactNavigation=require('react-navigation');var _queryString=require('./utils/queryString');function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var BACK=_reactNavigation.NavigationActions.BACK,NAVIGATE=_reactNavigation.NavigationActions.NAVIGATE;var generateQueryStringFromParams=function generateQueryStringFromParams(params){var data=Object.keys(params).reduce(function(prev,cur){prev.push(cur+'='+params[cur]);return prev;},[]);if(data){return'?'+data.join('&');}return'';};var reducer=function reducer(Navigator){return function(history,currState,action){var basePath=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'/';if((0,_isEmpty2.default)(history))return null;switch(action.type){case NAVIGATE:{var state=Navigator.router.getStateForAction(action,currState)||Navigator.router.getStateForAction(action);var _Navigator$router$get=Navigator.router.getPathAndParamsForState(state),path=_Navigator$router$get.path,_Navigator$router$get2=_Navigator$router$get.params,params=_Navigator$router$get2===undefined?{}:_Navigator$router$get2;var qs=(0,_queryString.queryToString)(params);if(!action.dontPushHistory){history.push({pathname:''+basePath+path,search:qs});}return state;}case BACK:{history.goBack();break;}default:return Navigator.router.getStateForAction(action,currState)||Navigator.router.getStateForAction(action);}return currState;};};exports.default=reducer;